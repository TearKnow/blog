---
layout:     post
author:     YF
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - 跨域
---

目前看起来有两种：1. php里直接设置  2. niginx里设置

```php
<?php
// 设置 CORS 响应头，允许所有来源
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS');
header('Access-Control-Allow-Headers: Content-Type, Authorization, X-Requested-With');
header('Access-Control-Allow-Credentials: true');

// 处理请求逻辑
echo "Hello from the API!";
?>
```


nginx中配置

```
server {
    listen 80;
    server_name example.com;

    location /api/ {
        # 设置 CORS 响应头
        add_header 'Access-Control-Allow-Origin' $http_origin;  # 动态允许请求的来源
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, OPTIONS';  # 允许的 HTTP 方法
        add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';  # 允许的请求头
        add_header 'Access-Control-Allow-Credentials' 'true';  # 允许带凭证（如 Cookies）

        # 处理 OPTIONS 请求（预检请求）
        if ($request_method = 'OPTIONS') {
            return 204;  # No Content
        }

        # 其他请求处理逻辑
    }
}

```