---
layout:     post
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - Algorithm
---

参考书籍《算法小抄》或者网页网页版本的《算法小抄》https://labuladong.gitee.io/algo/1/9/

### 最基本的回溯框架
```php
<?php
    //基本的回溯框架
    
    class test{
        public $result = [];

        public function calc($nums){
            $this->doit($nums, [], count($nums));
            return $this->result;
        }

        public function doit($selectable, $selected, $target){
            if(count($selected) == $target){
                echo implode('', $selected) . "\n";
                $this->result[] = $selected;
                return;
            }

            for($i = 0; $i < count($selectable); $i++){
                $selected[] = $selectable[$i];
                $this->doit($selectable, $selected, $target);
                array_pop($selected);
            }
        }
    }

    $obj = new test();
    $r = $obj->calc([1, 2, 3]);
    //var_dump($r);

```

有3个步骤，做选择，递归，撤销选择！  
打印的结果就是 111 112 113 121 122 123 ... (3个for循环嵌套的感觉)  
类似113之后，一个for结束了，就轮到113中的1`1`3 做选择了，开始12x  


### 关于排列、组合和子集的三种情况：
`形式一`: 元素无重不可复选  
以组合为例，如果输入 nums = [2,3,6,7]，和为 7 的组合应该只有 [7]。 

`形式二`: 元素可重不可复选  
以组合为例，如果输入 nums = [2,5,2,1,2]，和为 7 的组合应该有两种 [2,2,2,1] 和 [5,2]。  

`形式三`: 元素无重可复选   
以组合为例，如果输入 nums = [2,3,6,7]，和为 7 的组合应该有两种 [2,2,3] 和 [7]。  

第四种形式，即元素可重可复选。但既然元素可复选，那又何必存在重复元素呢？元素去重之后就等同于形式三，所以这种情况不用考虑  

排列、组合、子集问题都可以有这三种基本形式，所以共有 9 种变化  



### 1. 子集
#### 1.1 子集-元素无重不可复选($start控制产生重复子集)
比如输入 nums = [1,2,3]，算法应该返回如下子集：[ [],[1],[2],[3],[1,2],[1,3],[2,3],[1,2,3] ]， 其实里面的元素都是比前面的大。  

```php
<?php
    //基本的回溯框架
    
    class test{
        public $result = [];

        public function calc($nums){
            $this->doit($nums, [], 0);
            return $this->result;
        }

        public function doit($selectable, $selected, $start){
            $this->result[] = $selected;

            for($i = $start; $i < count($selectable); $i++){//使用start控制，类似减少出现 【2，1】的情况。
                $selected[] = $selectable[$i];
                $this->doit($selectable, $selected, $i + 1);//下次是$i+1
                array_pop($selected);
            }
        }
    }

    $obj = new test();
    $r = $obj->calc([1, 2, 3]);
    foreach($r as $v){
        echo implode('', $v)."\n";
    }

    输出结果：
    '' //这是空 子集
    1
    12
    123
    13
    2
    23
    3
```

### 2. 组合
#### 2.1 组合-元素无重不可复选（1.1改造，加个if条件）
如果能够成功的生成所有无重子集，那么稍微改改代码就能生成所有无重组合了  
比如说，让你在 nums = [1,2,3] 中拿 2 个元素形成所有的组合，你怎么做？  
稍微想想就会发现，大小为 2 的所有组合，不就是所有大小为 2 的子集嘛。  

代码省略：把1.1中的代码`$this->result[] = $selected;` 外面套个条件就行，比如当selected个数为2个时，加入判断。


### 3. 排列
#### 3.1 排列-元素无重不可复选（回溯框架改造，easy）
代码略

